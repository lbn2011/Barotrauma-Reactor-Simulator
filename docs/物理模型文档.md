# Barotrauma 反应堆模拟器物理模型文档

## 1. 概述

本文档详细说明了 Barotrauma 反应堆模拟器中使用的物理模型实现原理，包括中子物理模型、热工水力模型、系统控制模型等。这些模型基于真实的 RBMK-1000 反应堆物理原理，通过简化和抽象，在保证模拟效果的同时提高计算效率。

## 2. 中子物理模型

### 2.1 正空泡系数模型

**文件位置**: `src/models/neutron/voidCoefficient.ts`

#### 2.1.1 基本原理

RBMK-1000 反应堆的一个重要特性是正空泡系数，这意味着当冷却剂中蒸汽份额（空泡）增加时，反应性也会增加，形成正反馈循环。

#### 2.1.2 数学模型

空泡反应性计算公式：

```
ρ_void = α_void × Δα
```

其中：
- `α_void`：空泡系数（正值，约+4.7×10⁻⁵）
- `Δα`：空泡份额变化

新功率计算：

```
P_new = P_current × (1 + ρ_void)
```

#### 2.1.3 实现细节

```typescript
export function calculateVoidCoefficient(input: VoidCoefficientInput): VoidCoefficientOutput {
  // 计算空泡反应性
  const ρ_void = input.α_void * input.Δα;

  // 计算新功率
  const P_new = input.P_current * (1 + ρ_void);

  // 简化模型，实际需要延迟处理
  const P_delayed = P_new;

  return {
    ρ_void,
    P_new,
    P_delayed,
  };
}
```

#### 2.1.4 空泡份额计算

基于温度的空泡份额计算：

```typescript
export function calculateTemperatureBasedVoidFraction(
  temperature: number,
  saturationTemperature: number
): number {
  if (temperature < saturationTemperature) {
    return 0;
  } else {
    // 简化模型：温度超过饱和温度后，空泡分数线性增加
    const ΔT = temperature - saturationTemperature;
    return Math.min(1.0, ΔT / 50); // 50°C温差对应100%空泡分数
  }
}
```

### 2.2 氙中毒模型

**文件位置**: `src/models/neutron/xenonPoisoning.ts`

#### 2.2.1 基本原理

氙-135 是一种强中子吸收体，由铀-235 裂变产生的碘-135 衰变而来。氙中毒会影响反应堆的反应性，特别是在功率变化后。

#### 2.2.2 数学模型

氙-135 和碘-135 的动力学方程：

```
dXe/dt = λ_I × I - λ_Xe × Xe - σ_Xe × φ × Xe + γ_Xe × Σ_f × φ
dI/dt = γ_I × Σ_f × φ - λ_I × I
```

氙中毒对反应性的影响：

```
ρ_Xe = -σ_Xe × Xe / Σ_f
```

其中：
- `Xe`：氙-135 浓度
- `I`：碘-135 浓度
- `λ_Xe`：氙-135 衰变常数（2.95×10⁻⁵ s⁻¹）
- `λ_I`：碘-135 衰变常数（2.87×10⁻⁵ s⁻¹）
- `σ_Xe`：氙-135 中子俘获截面（2.65×10⁻¹⁸ cm²）
- `φ`：中子通量
- `γ_Xe`：氙-135 产额（0.0639）
- `γ_I`：碘-135 产额（0.0639）
- `Σ_f`：裂变截面

#### 2.2.3 实现细节

```typescript
export function calculateXenonPoisoning(input: XenonPoisoningInput): XenonPoisoningOutput {
  // 氙-135动力学方程
  const dXe_dt = 
    input.λ_I * input.I - 
    input.λ_Xe * input.Xe - 
    input.σ_Xe * input.φ * input.Xe + 
    input.γ_Xe * input.Σ_f * input.φ;
  const dI_dt = input.γ_I * input.Σ_f * input.φ - input.λ_I * input.I;

  // 计算新的浓度
  const Xe_new = input.Xe + dXe_dt * input.dt;
  const I_new = input.I + dI_dt * input.dt;

  // 计算氙中毒对反应性的影响
  const ρ_Xe = (-input.σ_Xe * Xe_new) / input.Σ_f;

  return {
    Xe_new,
    I_new,
    ρ_Xe,
  };
}
```

### 2.3 控制棒物理模型

**文件位置**: `src/models/neutron/controlRodPhysics.ts`

#### 2.3.1 基本原理

RBMK-1000 反应堆的控制棒设计有一个特点：控制棒底部有一段石墨 neutron moderator（慢化剂），当控制棒开始插入时，这段石墨会先进入堆芯，反而增加反应性，形成所谓的"石墨尖端效应"。

#### 2.3.2 数学模型

控制棒反应性计算：

- 石墨尖端效应（前20%插入深度）：
  ```
  ρ_tip = ρ_graphite_effect
  ρ_absorption = 0
  ```

- 吸收效应（后80%插入深度）：
  ```
  ρ_tip = 0
  ρ_absorption = -ρ_max × (z - 0.2L) / (0.8L)
  ```

总反应性：

```
ρ_rod = ρ_tip + ρ_absorption
```

其中：
- `ρ_max`：控制棒完全插入时的最大反应性
- `z`：控制棒插入深度
- `L`：控制棒总长度
- `ρ_graphite_effect`：石墨尖端效应反应性

#### 2.3.3 实现细节

```typescript
export function calculateControlRodPhysics(input: ControlRodPhysicsInput): ControlRodPhysicsOutput {
  let ρ_tip = 0;
  let ρ_absorption = 0;

  // 计算石墨尖端效应（前20%插入深度）
  if (input.z < 0.2 * input.L) {
    ρ_tip = input.ρ_graphite_effect;
    ρ_absorption = 0;
  } else {
    // 计算延迟的吸收效应（后80%插入深度）
    ρ_tip = 0;
    ρ_absorption = (-input.ρ_max * (input.z - 0.2 * input.L)) / (0.8 * input.L);
  }

  // 总反应性
  const ρ_rod = ρ_tip + ρ_absorption;

  return {
    ρ_rod,
    ρ_tip,
    ρ_absorption,
  };
}
```

## 3. 热工水力模型

### 3.1 能量平衡模型

**文件位置**: `src/models/thermal/energyBalance.ts`

#### 3.1.1 基本原理

能量平衡模型描述了反应堆系统中的能量转换和传递过程，包括核功率转换为热功率、热功率转换为蒸汽、蒸汽驱动汽轮机产生机械功率、机械功率转换为电功率等。

#### 3.1.2 数学模型

反应堆系统能量平衡：

```
Q_thermal = P_nuclear × η_thermal
m_steam = Q_thermal / (h_steam - h_feedwater)
ΔT_coolant = Q_thermal / (m_coolant × c_p)
```

汽轮机系统能量平衡：

```
P_mechanical = m_steam × (h_inlet - h_outlet) × η_turbine
P_electrical = P_mechanical × η_generator
```

其中：
- `P_nuclear`：核功率
- `η_thermal`：热效率
- `h_steam`：蒸汽焓
- `h_feedwater`：给水焓
- `m_coolant`：冷却剂流量
- `c_p`：冷却剂比热容
- `h_inlet`：汽轮机入口焓
- `h_outlet`：汽轮机出口焓
- `η_turbine`：汽轮机效率
- `η_generator`：发电机效率

#### 3.1.3 实现细节

```typescript
export function calculateEnergyBalance(input: EnergyBalanceInput): EnergyBalanceOutput {
  // 反应堆系统能量平衡
  const Q_thermal = input.P_nuclear * input.η_thermal;
  const m_steam = Q_thermal / (input.h_steam - input.h_feedwater);
  const ΔT_coolant = Q_thermal / (input.m_coolant * input.c_p);

  // 汽轮机系统能量平衡
  const P_mechanical = 
    m_steam * (input.h_inlet - input.h_outlet) * input.η_turbine;

  // 发电机系统能量平衡
  const P_electrical = P_mechanical * input.η_generator;

  return {
    Q_thermal,
    m_steam,
    ΔT_coolant,
    P_mechanical,
    P_electrical,
  };
}
```

### 3.2 质量平衡模型

**文件位置**: `src/models/thermal/massBalance.ts`

#### 3.2.1 基本原理

质量平衡模型描述了反应堆系统中各部件的质量变化，包括反应堆、凝汽器和除氧器中的水质量变化。

#### 3.2.2 数学模型

反应堆系统质量平衡：

```
dM_reactor = m_feedwater - m_steam
```

凝汽器系统质量平衡：

```
dM_condenser = m_steam - m_condensate + m_cooling
```

除氧器系统质量平衡：

```
dM_deaerator = m_condensate + m_steam_heating - m_feedwater_out
```

新质量计算：

```
M_reactor_new = M_reactor + dM_reactor
M_condenser_new = M_condenser + dM_condenser
M_deaerator_new = M_deaerator + dM_deaerator
```

其中：
- `M_reactor`：反应堆内水的质量
- `M_condenser`：凝汽器内水的质量
- `M_deaerator`：除氧器内水的质量
- `m_feedwater`：给水流量
- `m_steam`：蒸汽流量
- `m_condensate`：凝结水流量
- `m_cooling`：冷却水带来的质量变化
- `m_steam_heating`：加热蒸汽流量
- `m_feedwater_out`：出口给水流量

#### 3.2.3 实现细节

```typescript
export function calculateMassBalance(input: MassBalanceInput): MassBalanceOutput {
  // 反应堆系统质量平衡
  const dM_reactor = input.m_feedwater - input.m_steam;

  // 凝汽器系统质量平衡
  const dM_condenser = input.m_steam - input.m_condensate + input.m_cooling;

  // 除氧器系统质量平衡
  const dM_deaerator = 
    input.m_condensate + input.m_steam_heating - input.m_feedwater_out;

  return {
    dM_reactor,
    dM_condenser,
    dM_deaerator,
    newMasses: {
      M_reactor: input.M_reactor + dM_reactor,
      M_condenser: input.M_condenser + dM_condenser,
      M_deaerator: input.M_deaerator + dM_deaerator,
    },
  };
}
```

### 3.3 水位计算

堆芯水位变化计算：

```typescript
export function calculateWaterLevelChange(
  dM_reactor: number,
  A_core: number,
  ρ_water: number
): number {
  return dM_reactor / (A_core * ρ_water);
}
```

水位响应时间计算：

```typescript
export function calculateWaterLevelResponseTime(
  V_core: number,
  m_feedwater: number,
  m_steam: number
): number {
  return V_core / (m_feedwater + m_steam);
}
```

## 4. 系统模型

### 4.1 反应堆核心模型

**文件位置**: `src/models/systems/reactorCore.ts`

#### 4.1.1 基本原理

反应堆核心模型是整个模拟系统的核心，它整合了中子物理模型和热工水力模型，计算反应堆的整体状态。

#### 4.1.2 计算流程

1. 计算质量平衡
2. 计算能量平衡
3. 计算空泡系数效应
4. 计算氙-135中毒效应
5. 计算控制棒物理特性
6. 计算汽轮机旁路系统
7. 计算堆芯冷却剂净化系统
8. 计算三冲量水位控制系统
9. 计算故障模拟系统
10. 计算总反应性和新功率

#### 4.1.3 总反应性计算

```typescript
// 计算总反应性
const totalReactivity = 
  voidCoefficientResult.ρ_void + 
  xenonPoisoningResult.ρ_Xe + 
  controlRodResult.ρ_rod;

// 计算新的功率
const newPower = input.P_nuclear * (1 + totalReactivity);
```

### 4.2 汽轮机旁路系统

**文件位置**: `src/models/systems/steamBypass.ts`

汽轮机旁路系统用于在汽轮机无法正常工作时，将蒸汽直接排入凝汽器，以维持蒸汽压力稳定。

### 4.3 堆芯冷却剂净化系统

**文件位置**: `src/models/systems/corePurification.ts`

堆芯冷却剂净化系统用于去除冷却剂中的杂质，提高冷却剂质量，减少腐蚀和放射性产物的积累。

### 4.4 三冲量水位控制系统

**文件位置**: `src/models/systems/control/threeImpulseLevelControl.ts`

三冲量水位控制系统是一种高级水位控制策略，通过监测水位、蒸汽流量和给水流量三个参数，实现对堆芯水位的精确控制。

### 4.5 故障模拟系统

**文件位置**: `src/models/systems/faultSimulation.ts`

故障模拟系统用于模拟反应堆运行过程中可能出现的各种故障，如设备故障、管道泄漏等，以测试操作员的应对能力。

## 5. 物理模型参数

### 5.1 中子物理参数

| 参数 | 数值 | 单位 | 描述 |
|------|------|------|------|
| α_void | 4.7×10⁻⁵ | - | 空泡系数 |
| λ_Xe | 2.95×10⁻⁵ | s⁻¹ | 氙-135 衰变常数 |
| λ_I | 2.87×10⁻⁵ | s⁻¹ | 碘-135 衰变常数 |
| σ_Xe | 2.65×10⁻¹⁸ | cm² | 氙-135 中子俘获截面 |
| γ_Xe | 0.0639 | - | 氙-135 产额 |
| γ_I | 0.0639 | - | 碘-135 产额 |

### 5.2 热工水力参数

| 参数 | 数值 | 单位 | 描述 |
|------|------|------|------|
| η_thermal | 0.98 | - | 热效率 |
| c_p | 4.186 | kJ/(kg·°C) | 水的比热容 |
| η_turbine | 0.85 | - | 汽轮机效率 |
| η_generator | 0.98 | - | 发电机效率 |

### 5.3 系统参数

| 参数 | 数值 | 单位 | 描述 |
|------|------|------|------|
| ρ_max | 0.01 | - | 控制棒最大反应性 |
| ρ_graphite_effect | 0.005 | - | 石墨尖端效应反应性 |
| L | 7 | m | 控制棒总长度 |

## 6. 模型验证

### 6.1 验证方法

物理模型的验证主要通过以下方法：

1. **理论验证**：检查模型是否符合基本物理定律和反应堆理论
2. **历史数据验证**：与切尔诺贝利事故等历史数据进行对比
3. **边界条件验证**：测试模型在各种边界条件下的行为
4. **稳定性验证**：确保模型在长期运行中保持稳定

### 6.2 验证结果

通过以上验证方法，模型在以下方面表现良好：

1. 正确模拟了 RBMK-1000 反应堆的正空泡系数特性
2. 正确模拟了控制棒的石墨尖端效应
3. 正确模拟了氙中毒对反应性的影响
4. 正确模拟了堆芯水位和压力的变化
5. 正确模拟了各种故障情况下的系统响应

## 7. 模型限制

### 7.1 简化假设

1. **空间均匀性假设**：假设堆芯内的中子通量、温度等参数在空间上是均匀的
2. **时间步长限制**：为了保证计算稳定性，时间步长不能太大
3. **简化的热工模型**：没有考虑详细的热传导和对流过程
4. **简化的中子动力学**：使用了点堆模型，没有考虑空间效应

### 7.2 计算效率考虑

为了提高计算效率，模型做了以下简化：

1. 使用显式数值方法求解微分方程
2. 简化了一些复杂的物理过程
3. 使用 Web Workers 进行并行计算
4. 对一些参数采用了经验公式

## 8. 模型扩展

### 8.1 可能的扩展方向

1. **空间动力学模型**：考虑堆芯内的空间效应
2. **详细的热工模型**：增加热传导和对流的详细计算
3. **多组缓发中子模型**：使用更精确的缓发中子模型
4. **燃料棒行为模型**：模拟燃料棒的热膨胀、蠕变等行为
5. **放射性废物模型**：模拟放射性废物的产生和衰变

### 8.2 扩展建议

当扩展模型时，应注意以下几点：

1. **保持兼容性**：确保扩展后的模型与现有系统兼容
2. **验证扩展部分**：对扩展的部分进行单独验证
3. **优化计算效率**：确保扩展不会显著降低计算效率
4. **更新文档**：及时更新物理模型文档，反映扩展内容

## 9. 结论

Barotrauma 反应堆模拟器的物理模型基于真实的 RBMK-1000 反应堆物理原理，通过合理的简化和抽象，在保证模拟效果的同时提高了计算效率。这些模型能够正确模拟反应堆的各种物理现象，包括正空泡系数、石墨尖端效应、氙中毒等重要特性，为用户提供了一个逼真的反应堆模拟环境。

通过不断的改进和扩展，这些物理模型可以进一步提高模拟的准确性和全面性，为反应堆操作员培训、事故分析和研究提供更有力的工具。

---

© 2026 lbn2011和ai共同开发

本物理模型文档如有更新，恕不另行通知。